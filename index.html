<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css" >
    <title>Rock paper scissors</title>
</head>
<body>
    <h1>Rock paper scissors</h1>
    <form >
        <input id="textInput" type="text" placeholder="rock, paper or scissors?" >
        <input id="button" type="submit" value="submit">
    </form>
    <div id='results'></div>
    <script>
        function computerPlay() {
            let choice = ['rock', 'paper', 'scissors'];
            // console.log(choice[Math.floor(Math.random() * 3)])
            return (
                choice[Math.floor(Math.random() * 3)]
            );
        }

        function playRound(playerSelection, computerSelection) {
            let answer = playerSelection.toLowerCase();
            if (answer !== 'rock' && answer !== 'paper' && answer !== 'scissors') {
                console.log('Please select rock, paper or scissors');
                return ('Please select rock, paper or scissors');
            }
            else if (answer === 'rock' && computerSelection === 'paper') {
                console.log('You lose! Paper beats rock');
                return (false);
            }
            else if (answer === 'rock' && computerSelection === 'scissors') {
                console.log('You win! Rock beats scissors');
                return (true);
            }
            else if (answer === 'paper' && computerSelection === 'rock') {
                console.log('You win! Paper beats rock');
                return (true);
            }
            else if (answer === 'paper' && computerSelection === 'scissors') {
                console.log('You lose! Scissors beats paper');
                return (false);
            }
            else if (answer === 'scissors' && computerSelection === 'rock') {
                console.log('You lose! Rock beats scissors');
                return (false);
            }
            else if (answer === 'scissors' && computerSelection === 'paper') {
                console.log('You win! Paper beats scissors');
                return (true);
            }
            else {
                console.log('The round is a draw!');
                return ('The round is a draw!');
            }
        }
        
        let plays = 0;
        let button = document.querySelector('#button');

        function game() {
            let playerScore = 0;
            let computerScore = 0;
            let results = document.querySelector('#results');
            let userInput = document.getElementById('textInput').value;
            console.log(userInput);
            let computer = computerPlay();
            let result = playRound(userInput, computer);
            plays++;
            if (result === true) {
                playerScore++;
            }
            else if (result === false) {
                computerScore++;
            }
            if (plays === 5) {
                if (playerScore > computerScore) {
                    console.log('You won!');
                    let winner = document.createElement('p');
                    winner.classList.add('winner');
                    winner.textContent = 'You won!';
                    results.appendChild(winner);
                    return ('You won!')
                }
                else if (playerScore < computerScore) {
                    console.log('You lose!');
                    let looser = document.createElement('p');
                    looser.classList.add('looser');
                    looser.textContent = 'You lose!';
                    results.appendChild(looser);
                    return ('You lose!');
                }
                else {
                    console.log('The game is a draw!');
                    let draw = document.createElement('p');
                    draw.classList.add('draw');
                    draw.textContent = 'The game is a draw!';
                    results.appendChild(draw);
                    return ('The game is a draw!');
                }
            }
            
        }

        button.addEventListener('click', (e) => {
            document.getElementById('textInput').value = '';
            e.preventDefault();
            game(); 
        });
        
    </script>
</body>
</html>